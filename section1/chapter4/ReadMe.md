第3章 表达式和运算符

# 原始表达式
JavaScript原始表达式包含常量或者直接量、关键字和变量

```
1.23          //数值
"hello"       //字符串
/pattern/      //正则表达式
true
false
null
this 
undefined
```
# 对象和数组的初始化表达式

```
[]   //空数组
[1+2,3+4]   //[3,7]
var arr=[1,,,5] //[1,undefined,undefined,5]

var q={}  //空对象
```

# 函数定义表达式
某种意义上可以称为“函数直接量”，表达式的值是新定义的函数

```
var func=function(x){}
```

# 属性访问表达式
两种属性访问语法:
```
expression.identifier
expression[expression] //适用于对象和数组
```

# 调用表达式

# 对象创建表达式

```
new Object()
new Point(2,3)
//如果没有参数
new Object
new Point
```

# 运算符概述
A列表示运算符的结合性，L（从左至右）或R（从右至左）
N列表示操作数的个数
类型表示期望的操作数类型和运算符的结果类型


|运算符|操作|A|N|类型|
|:-:|:-:|:-:|:-:|:-:|  
|++|前/后增量|R|1|leftval->num|
|--|前/后减量|R|1|leftval->num|
|-|求反|R|1|num->num|
|+|转换为数字|R|1|num->num|
|~|按位求反|R|1|int->int|
|!|逻辑非|R|1|bool->bool|
|delete|删除属性|R|1|leftval->bool|
|typeof|检测操作数类型|R|1|any->str|
|void|返回undefined|R|1|any->underfined|
|-|-|-|-|-| 
|*、/、%|乘、除、求余|L|2|num,num->num|
|-|-|-|-|-| 
|+、-|加、减|L|2|num,num->num|
|+|字符串连接|L|2|str,str->str|
|-|-|-|-|-| 
|<<|左移位|L|2|int,int->int|
|>>|有符号右移|L|2|int,int->int|
|>>>|无符号右移|L|2|int,int->int|
|-|-|-|-|-| 
|<、<=、>、>=|比较数字顺序|L|2|num,num->bool|
|<、<=、>、>=|比较在字母表中的顺序|L|2|str,str->bool|
|instanceof|检测对象类|L|2|obj,func->bool|
|in|检测属性是存在|L|2|str,obj->bool|
|-|-|-|-|-| 
|==|判断相等|L|2|any,any->bool|
|!=|判断不等|L|2|any,any->bool|
|===|判断恒等|L|2|any,any->bool|
|!==|判断非恒等|L|2|any,any->bool|
|-|-|-|-|-| 
|&|按位与|L|2|int,int->int|
|-|-|-|-|-| 
|^|按位异或|L|2|int,int->int|
|-|-|-|-|-| 
|\||按位或|L|2|int,int->int|
|-|-|-|-|-| 
|&&|逻辑与|L|2|any,any->any|
|-|-|-|-|-| 
|\|\||逻辑或|L|2|any,any->any|
|-|-|-|-|-|
|?:|条件运算符|R|3|bool,any,any->any|
|-|-|-|-|-|
|=|变量赋值或对象属性赋值|R|2|leftval,any->any|
|*=、/=、%=、+=、-=、&=、^=、\|=、<<=、>>=、>>>=|变量赋值或对象属性赋值运算且赋值|R|2|leftval,any->any|
|-|-|-|-|-|
|,|忽略第一个操作数，返回第二个操作数|L|2|any,any->any|



## 操作数的个数
JavaScript大多数的运算符是一个二元运算符，操作数是两个。一元运算符只有一个操作数

## 操作数类型和结果类型
JavaScript运算符通常根据需要对操作数进行类型转换。
```
"3"*"5"  //结果为15， *操作符需要两个操作数是数字，因此做了转换
```


##左值
表达式只能出现在赋值运算符的左侧，对象属性和数组元素都是左值

## 运算符的副作用
```
++i
i--
```
包含隐式的赋值
```
delete o.i
```
删除属性，类似给属性赋值undefined

##  运算符优先级
乘法和除法优先级高于加法和减法，赋值运算符的优先级非常低，通常总是最后执行


## 运算符的结合性

一元操作符、赋值和三元条件运算符都是从右至左的结合性


## 运算顺序
JavaScript严格按照从左至右的顺序计算表达式


# 算术表达式
## "+"运算符

两个操作数不是类字符串，将进行算术加法运算。

如果操作数其中一个是对象，对象会转换为原始值（日期对象通过toString()转换，其他对象通过valueof()方法，不具备toString()方法的通过valueof()转换）
如果一个操作数转换后是字符串，则另外一个操作数也转换为字符串然后连接
否则两个操作数转换成数字进行加法操作

## 一元算术运算符
## 位运算符
# 关系表达式

## 相等和不等运算符
"===" 恒等运算符，检测两个操作数是否严格相等，首先比较操作数的值是否相等，再比较有没有类型转换。
"==" 相等运算符，检测两个运算符是否相等，这里的相等允许类型转换。

## 比较运算符
如果需要转换，则首先使用valueof()方法，否则使用toString()

**加号运算符偏向于字符串连接。比较运算符偏向于数字比较，只有两个操作数都是字符串的时候才进行字符串比较**

## in 运算符
in左边的操作数是一个字符串或者可以转换成字符串，右侧是一个对象，如果右侧的对象拥有左侧操作数值的属性名，则表达式true

##　instanceof 运算符
左侧操作数是一个对象，右侧是对象的类.instanceof判断对象是否属于某个类的实例的时候也会包含对父类的检测。
```
object instanceof Object
```

# 逻辑表达式


##　typeof 运算符
|x|typeof x|
|:-:|:-:|
|undefined|"undefined"|
|null|"object"|
|true或false|"boolean"|
|任意数字或NaN|"number"|
|任意字符串|"string"|
|任意函数|"function"|
|任意内置对象（非函数）|"object"|
|任意宿主对象|由编译器实现|


## delete 运算符
删除对象属性或者数组元素
